package com.github.asterixorobelix.bitcoinblockexplorer

import com.github.asterixorobelix.bitcoinblockexplorer.network.MempoolClient
import com.github.asterixorobelix.bitcoinblockexplorer.network.MempoolClient.Companion.MEMPOOL_BASE_URL
import com.github.asterixorobelix.bitcoinblockexplorer.recent_blocks.BlockResponse
import com.github.asterixorobelix.bitcoinblockexplorer.recent_blocks.BlocksRepository
import com.google.common.truth.Truth
import io.ktor.client.HttpClient
import io.ktor.client.call.body
import io.ktor.client.engine.mock.MockEngine
import io.ktor.client.engine.mock.respond
import io.ktor.client.plugins.contentnegotiation.ContentNegotiation
import io.ktor.client.request.get
import io.ktor.client.statement.HttpResponse
import io.ktor.http.HttpHeaders
import io.ktor.http.HttpStatusCode
import io.ktor.http.headersOf
import io.ktor.serialization.kotlinx.json.json
import io.ktor.utils.io.ByteReadChannel
import kotlinx.coroutines.test.runTest
import kotlinx.serialization.json.Json
import org.junit.Before
import org.junit.Test
import org.mockito.Mockito

class MempoolClientTests {
    private lateinit var mempoolClient: MempoolClient
    private lateinit var httpClient: HttpClient

    @Before
    fun setup() {
        httpClient = Mockito.mock(HttpClient::class.java)
        mempoolClient = MempoolClient(httpClient)
    }

    @Test
    fun `confirm base url correct`(){
        Truth.assertThat(MempoolClient.MEMPOOL_BASE_URL).isEqualTo("https://mempool.space/api/v1/")
    }

    @Test
    fun `confirm get blocks returns Block Response List`(){
        runTest {
            val mockEngine = MockEngine {
                respond(
                    content = ByteReadChannel(TEST_SAMPLE_DATA),
                    status = HttpStatusCode.OK,
                    headers = headersOf(HttpHeaders.ContentType, "application/json")
                )
            }
            val mempoolClient = MempoolClient(HttpClient(mockEngine){ install(ContentNegotiation){
                json(Json {
                    prettyPrint = true
                    isLenient = true
                    ignoreUnknownKeys = true
                })
            } })

            Truth.assertThat(mempoolClient.getBlocks()).isEqualTo(listOf(BlockResponse(id = "1234"), BlockResponse(id = "1023")))
        }
    }

    companion object{
         val TEST_SAMPLE_DATA = "[{\"id\":\"0000000000000000000384f28cb3b9cf4377a39cfd6c29ae9466951de38c0529\",\"height\":730000,\"version\":536870912,\"timestamp\":1648829449,\"bits\":386521239,\"nonce\":3580664066,\"difficulty\":28587155782195.14,\"merkle_root\":\"efa344bcd6c0607f93b709515dd6dc5496178112d680338ebea459e3de7b4fbc\",\"tx_count\":1627,\"size\":1210916,\"weight\":3993515,\"previousblockhash\":\"00000000000000000008b6f6fb83f8d74512ef1e0af29e642dd20daddd7d318f\",\"mediantime\":1648827418,\"extras\":{\"totalFees\":16321983,\"medianFee\":12,\"feeRange\":[11.12850929221036,12.056975218096193,17,18.09557522123894,21.059360730593607,27.258064516129032,318.3023872679045],\"reward\":641321983,\"pool\":{\"id\":105,\"name\":\"Binance Pool\",\"slug\":\"binancepool\",\"minerNames\":null},\"avgFee\":10038,\"avgFeeRate\":16,\"coinbaseRaw\":\"0390230b1362696e616e63652f383038e0006f02cd583765fabe6d6d686355577affaad03015e732428a927a5d2d842471b350394139616bcb4401d804000000000000001a750000c9ad0000\",\"coinbaseAddress\":\"1JvXhnHCi6XqcanvrZJ5s2Qiv4tsmm2UMy\",\"coinbaseAddresses\":[\"1JvXhnHCi6XqcanvrZJ5s2Qiv4tsmm2UMy\"],\"coinbaseSignature\":\"OP_DUP OP_HASH160 OP_PUSHBYTES_20 c499d0604392cc2051d7476056647d1c1bfc3f38 OP_EQUALVERIFY OP_CHECKSIG\",\"coinbaseSignatureAscii\":\"\\u0003\u0090#\\u000b\\u0013binance/808à\\u0000o\\u0002ÍX7eú¾mmhcUWzÿªÐ0\\u0015ç2B\u008A\u0092z]-\u0084q³P9A9akËD\\u0001Ø\\u0004\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u001au\\u0000\\u0000É\u00AD\\u0000\\u0000\",\"avgTxSize\":744,\"totalInputs\":6249,\"totalOutputs\":6768,\"totalOutputAmt\":1314305994870,\"medianFeeAmt\":3182,\"feePercentiles\":[313,2086,2538,3182,5625,14136,990660],\"segwitTotalTxs\":1314,\"segwitTotalSize\":1031785,\"segwitTotalWeight\":3277099,\"header\":\"000000208f317dddad0dd22d649ef20a1eef1245d7f883fbf6b608000000000000000000bc4f7bdee359a4be8e3380d61281179654dcd65d5109b7937f60c0d6bc44a3ef0924476297d8091702996cd5\",\"utxoSetChange\":519,\"utxoSetSize\":80390138,\"totalInputAmt\":1314322316853,\"virtualSize\":998378.75,\"firstSeen\":null,\"orphans\":[],\"matchRate\":null,\"expectedFees\":null,\"expectedWeight\":null}},{\"id\":\"00000000000000000008b6f6fb83f8d74512ef1e0af29e642dd20daddd7d318f\",\"height\":729999,\"version\":793796608,\"timestamp\":1648828946,\"bits\":386521239,\"nonce\":3477019455,\"difficulty\":28587155782195.14,\"merkle_root\":\"d84f9cc1823bd069c505061b1f6faabd809d67ab5354e9f6234312dc4bdb1ecf\",\"tx_count\":2574,\"size\":1481957,\"weight\":3993485,\"previousblockhash\":\"000000000000000000071e6c86c2175aa86817cae2a77acd95372b55c1103d89\",\"mediantime\":1648827210,\"extras\":{\"totalFees\":24090210,\"medianFee\":18,\"feeRange\":[11.128509719222462,14.045375218150086,17.242510249132767,18.09625668449198,20.865671641791046,28.732394366197184,300],\"reward\":649090210,\"pool\":{\"id\":105,\"name\":\"Binance Pool\",\"slug\":\"binancepool\",\"minerNames\":null},\"avgFee\":9362,\"avgFeeRate\":24,\"coinbaseRaw\":\"038f230b1362696e616e63652f373739d8002900ca5de7a9fabe6d6dda31112c36c10a523154eae76847579755cd4ae558ee2e6f9f200b05dd32a0bf04000000000000006372000000020000\",\"coinbaseAddress\":\"1JvXhnHCi6XqcanvrZJ5s2Qiv4tsmm2UMy\",\"coinbaseAddresses\":[\"1JvXhnHCi6XqcanvrZJ5s2Qiv4tsmm2UMy\"],\"coinbaseSignature\":\"OP_DUP OP_HASH160 OP_PUSHBYTES_20 c499d0604392cc2051d7476056647d1c1bfc3f38 OP_EQUALVERIFY OP_CHECKSIG\",\"coinbaseSignatureAscii\":\"\\u0003\u008F#\\u000b\\u0013binance/779Ø\\u0000)\\u0000Ê]ç©ú¾mmÚ1\\u0011,6Á\\nR1TêçhGW\u0097UÍJåXî.o\u009F \\u000b\\u0005Ý2 ¿\\u0004\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000cr\\u0000\\u0000\\u0000\\u0002\\u0000\\u0000\",\"avgTxSize\":575.58,\"totalInputs\":7370,\"totalOutputs\":7209,\"totalOutputAmt\":1309748564727,\"medianFeeAmt\":3132,\"feePercentiles\":[295,2034,2516,3132,5010,11322,2392067],\"segwitTotalTxs\":2170,\"segwitTotalSize\":1289031,\"segwitTotalWeight\":3221889,\"header\":\"0060502f893d10c1552b3795cd7aa7e2ca1768a85a17c2866c1e07000000000000000000cf1edb4bdc124323f6e95453ab679d80bdaa6f1f1b0605c569d03b82c19c4fd81222476297d809173f1b3fcf\",\"utxoSetChange\":-161,\"utxoSetSize\":80389632,\"totalInputAmt\":1309772654937,\"virtualSize\":998371.25,\"firstSeen\":null,\"orphans\":[],\"matchRate\":null,\"expectedFees\":null,\"expectedWeight\":null}},{\"id\":\"000000000000000000071e6c86c2175aa86817cae2a77acd95372b55c1103d89\",\"height\":729998,\"version\":536887300,\"timestamp\":1648828072,\"bits\":386521239,\"nonce\":3885273400,\"difficulty\":28587155782195.14,\"merkle_root\":\"95cb77ba1449155bddf8a9f5effe1df0adf8d9cd958c45bc0777f30e2b225ca6\",\"tx_count\":2680,\"size\":1516448,\"weight\":3999836,\"previousblockhash\":\"0000000000000000000298d03f55073dd8554774a1230cc5214a411943d1bff0\",\"mediantime\":1648827009,\"extras\":{\"totalFees\":3502122,\"medianFee\":3,\"feeRange\":[2.3401360544217686,2.471841704718417,2.719298245614035,3.010600706713781,3.1149825783972127,3.437352245862884,132.6829268292683],\"reward\":628502122,\"pool\":{\"id\":94,\"name\":\"Poolin\",\"slug\":\"poolin\",\"minerNames\":null},\"avgFee\":1307,\"avgFeeRate\":3,\"coinbaseRaw\":\"038e230b04a81e47622f706f6f6c696e2e636f6d2ffabe6d6ddcdc676e3283583278530ad7e70d9e4a4f800461f61c7ce1544b5cf56e322001010000000000000042b678f081b84234e9af40d7ee2a9b531200018b040000000000\",\"coinbaseAddress\":\"1GNgwA8JfG7Kc8akJ8opdNWJUihqUztfPe\",\"coinbaseAddresses\":[\"1GNgwA8JfG7Kc8akJ8opdNWJUihqUztfPe\"],\"coinbaseSignature\":\"OP_DUP OP_HASH160 OP_PUSHBYTES_20 a8a3f4fbd6a9a7b8c668730694a1e54df3e07b9f OP_EQUALVERIFY OP_CHECKSIG\",\"coinbaseSignatureAscii\":\"\\u0003\u008E#\\u000b\\u0004¨\\u001eGb/poolin.com/ú¾mmÜÜgn2\u0083X2xS\\n×ç\\r\u009EJO\u0080\\u0004aö\\u001c|áTK\\\\õn2 \\u0001\\u0001\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000B¶xð\u0081¸B4é¯@×î*\u009BS\\u0012\\u0000\\u0001\u008B\\u0004\\u0000\\u0000\\u0000\\u0000\\u0000\",\"avgTxSize\":565.66,\"totalInputs\":7853,\"totalOutputs\":5403,\"totalOutputAmt\":69908586168,\"medianFeeAmt\":531,\"feePercentiles\":[110,336,423,531,718,1575,179464],\"segwitTotalTxs\":2323,\"segwitTotalSize\":1177490,\"segwitTotalWeight\":2644112,\"header\":\"04400020f0bfd14319414a21c50c23a1744755d83d07553fd09802000000000000000000a65c222b0ef37707bc458c95cdd9f8adf01dfeeff5a9f8dd5b154914ba77cb95a81e476297d80917389194e7\",\"utxoSetChange\":-2450,\"utxoSetSize\":80389820,\"totalInputAmt\":69912088290,\"virtualSize\":999959,\"firstSeen\":null,\"orphans\":[],\"matchRate\":null,\"expectedFees\":null,\"expectedWeight\":null}},{\"id\":\"0000000000000000000298d03f55073dd8554774a1230cc5214a411943d1bff0\",\"height\":729997,\"version\":551550976,\"timestamp\":1648828031,\"bits\":386521239,\"nonce\":1528681029,\"difficulty\":28587155782195.14,\"merkle_root\":\"b15d370102a6a9cd1c345ea51a119218634f880577d7723e3db8b6a9f5d0840b\",\"tx_count\":2455,\"size\":1662318,\"weight\":3992835,\"previousblockhash\":\"00000000000000000002418941e05571624e7cd5c77930b3af4a9ae8b5b958ea\",\"mediantime\":1648826388,\"extras\":{\"totalFees\":12874488,\"medianFee\":10,\"feeRange\":[3.506726457399103,3.5736568457538995,5.450395083406497,12.748344370860927,18.09375,21.059360730593607,390.625],\"reward\":637874488,\"pool\":{\"id\":111,\"name\":\"Foundry USA\",\"slug\":\"foundryusa\",\"minerNames\":null},\"avgFee\":5246,\"avgFeeRate\":12,\"coinbaseRaw\":\"038d230b047f1e47622f466f756e6472792055534120506f6f6c202364726f70676f6c642f0abd30d500000a09aa230300\",\"coinbaseAddress\":\"19dENFt4wVwos6xtgwStA6n8bbA57WCS58\",\"coinbaseAddresses\":[\"19dENFt4wVwos6xtgwStA6n8bbA57WCS58\"],\"coinbaseSignature\":\"OP_DUP OP_HASH160 OP_PUSHBYTES_20 5e9b23809261178723055968d134a947f47e799f OP_EQUALVERIFY OP_CHECKSIG\",\"coinbaseSignatureAscii\":\"\\u0003\u008D#\\u000b\\u0004\\u001eGb/Foundry USA Pool #dropgold/\\n½0Õ\\u0000\\u0000\\n\\tª#\\u0003\\u0000\",\"avgTxSize\":676.99,\"totalInputs\":7934,\"totalOutputs\":6723,\"totalOutputAmt\":3458780023701,\"medianFeeAmt\":2324,\"feePercentiles\":[110,606,1075,2324,3800,7920,543900],\"segwitTotalTxs\":2074,\"segwitTotalSize\":1507584,\"segwitTotalWeight\":3374007,\"header\":\"0000e020ea58b9b5e89a4aafb33079c7d57c4e627155e0418941020000000000000000000b84d0f5a9b6b83d3e72d77705884f631892111aa55e341ccda9a60201375db17f1e476297d8091745d21d5b\",\"utxoSetChange\":-1211,\"utxoSetSize\":80392308,\"totalInputAmt\":3458792898189,\"virtualSize\":998208.75,\"firstSeen\":null,\"orphans\":[],\"matchRate\":null,\"expectedFees\":null,\"expectedWeight\":null}},{\"id\":\"00000000000000000002418941e05571624e7cd5c77930b3af4a9ae8b5b958ea\",\"height\":729996,\"version\":538968064,\"timestamp\":1648827610,\"bits\":386521239,\"nonce\":731070580,\"difficulty\":28587155782195.14,\"merkle_root\":\"eaf60315752a45f739cd357ff4ce74806f0a1c12df963f664400a8517bddd5c1\",\"tx_count\":3013,\"size\":1550535,\"weight\":3992781,\"previousblockhash\":\"000000000000000000062a1f561406972aa992a3371547c47ff5dfffb6a1e683\",\"mediantime\":1648825994,\"extras\":{\"totalFees\":10325493,\"medianFee\":9,\"feeRange\":[3.9854756717501814,5,6.8022715539494065,8.571428571428571,10.145912452528483,18.116334661354582,545.8280542986425],\"reward\":635325493,\"pool\":{\"id\":115,\"name\":\"MARA Pool\",\"slug\":\"marapool\",\"minerNames\":null},\"avgFee\":3428,\"avgFeeRate\":10,\"coinbaseRaw\":\"038c230b215c204d41524120506f6f6c205c0000000074577857fbaaba62f7e5507a54eb0000\",\"coinbaseAddress\":\"1A32KFEX7JNPmU1PVjrtiXRrTQcesT3Nf1\",\"coinbaseAddresses\":[\"1A32KFEX7JNPmU1PVjrtiXRrTQcesT3Nf1\"],\"coinbaseSignature\":\"OP_DUP OP_HASH160 OP_PUSHBYTES_20 631b0fb3564b13fe38fc1423136ad6450169be5b OP_EQUALVERIFY OP_CHECKSIG\",\"coinbaseSignatureAscii\":\"\\u0003\u008C#\\u000b!\\\\ MARA Pool \\\\\\u0000\\u0000\\u0000\\u0000tWxWûªºb÷åPzTë\\u0000\\u0000\",\"avgTxSize\":514.52,\"totalInputs\":7506,\"totalOutputs\":6476,\"totalOutputAmt\":271254279521,\"medianFeeAmt\":1503,\"feePercentiles\":[141,718,1197,1503,2556,4638,387380],\"segwitTotalTxs\":2422,\"segwitTotalSize\":1278923,\"segwitTotalWeight\":2906441,\"header\":\"0000202083e6a1b6ffdff57fc4471537a392a92a970614561f2a06000000000000000000c1d5dd7b51a80044663f96df121c0a6f8074cef47f35cd39f7452a751503f6eada1c476297d809177440932b\",\"utxoSetChange\":-1030,\"utxoSetSize\":80393553,\"totalInputAmt\":271264605014,\"virtualSize\":998195.25,\"firstSeen\":null,\"orphans\":[],\"matchRate\":null,\"expectedFees\":null,\"expectedWeight\":null}},{\"id\":\"000000000000000000062a1f561406972aa992a3371547c47ff5dfffb6a1e683\",\"height\":729995,\"version\":538968064,\"timestamp\":1648827418,\"bits\":386521239,\"nonce\":2978032735,\"difficulty\":28587155782195.14,\"merkle_root\":\"7cf33e791af336fc0d5eb6d461931dfbd398227c67024ef0f652c19f797f396d\",\"tx_count\":1616,\"size\":1259544,\"weight\":3993078,\"previousblockhash\":\"00000000000000000008a538bd9c8548b41defcc6905694a40dc0815290062b0\",\"mediantime\":1648824045,\"extras\":{\"totalFees\":13432418,\"medianFee\":11,\"feeRange\":[9.98546511627907,10.442549736094193,10.81230669054208,11.192743764172336,18.06405693950178,20.05663716814159,271.9033232628399],\"reward\":638432418,\"pool\":{\"id\":111,\"name\":\"Foundry USA\",\"slug\":\"foundryusa\",\"minerNames\":null},\"avgFee\":8317,\"avgFeeRate\":13,\"coinbaseRaw\":\"038b230b041b1c47622f466f756e6472792055534120506f6f6c202364726f70676f6c642f0cada6b91aa8020000000000\",\"coinbaseAddress\":\"19dENFt4wVwos6xtgwStA6n8bbA57WCS58\",\"coinbaseAddresses\":[\"19dENFt4wVwos6xtgwStA6n8bbA57WCS58\"],\"coinbaseSignature\":\"OP_DUP OP_HASH160 OP_PUSHBYTES_20 5e9b23809261178723055968d134a947f47e799f OP_EQUALVERIFY OP_CHECKSIG\",\"coinbaseSignatureAscii\":\"\\u0003\u008B#\\u000b\\u0004\\u001b\\u001cGb/Foundry USA Pool #dropgold/\\f\u00AD¦¹\\u001a¨\\u0002\\u0000\\u0000\\u0000\\u0000\\u0000\",\"avgTxSize\":779.24,\"totalInputs\":7067,\"totalOutputs\":4233,\"totalOutputAmt\":329060976904,\"medianFeeAmt\":2538,\"feePercentiles\":[162,1528,1875,2538,3969,10330,1059540],\"segwitTotalTxs\":1271,\"segwitTotalSize\":965493,\"segwitTotalWeight\":2816982,\"header\":\"00002020b06200291508dc404a690569ccef1db448859cbd38a5080000000000000000006d397f799fc152f6f04e02677c2298d3fb1d9361d4b65e0dfc36f31a793ef37c1a1c476297d809175f2c81b1\",\"utxoSetChange\":-2834,\"utxoSetSize\":80394633,\"totalInputAmt\":329074409322,\"virtualSize\":998269.5,\"firstSeen\":null,\"orphans\":[],\"matchRate\":null,\"expectedFees\":null,\"expectedWeight\":null}},{\"id\":\"00000000000000000008a538bd9c8548b41defcc6905694a40dc0815290062b0\",\"height\":729994,\"version\":573341700,\"timestamp\":1648827210,\"bits\":386521239,\"nonce\":4095762777,\"difficulty\":28587155782195.14,\"merkle_root\":\"b59bd9b0f60fe4cbf5e62a771621f01ebe9d3c41786350b341c1d2de39bd5d37\",\"tx_count\":2878,\"size\":1671339,\"weight\":3993195,\"previousblockhash\":\"000000000000000000000e1192d4e00e86d075aec59a989f594ffd63a64906b7\",\"mediantime\":1648823983,\"extras\":{\"totalFees\":22085367,\"medianFee\":13,\"feeRange\":[11,11.145557655954631,11.945205479452055,13.96078431372549,15.574912891986063,18.972388955582232,349.65034965034965],\"reward\":647085367,\"pool\":{\"id\":43,\"name\":\"Braiins Pool\",\"slug\":\"braiinspool\",\"minerNames\":null},\"avgFee\":7676,\"avgFeeRate\":22,\"coinbaseRaw\":\"038a230bfabe6d6d41b2935a11c56008fd22a2646c0ffc321b916751624e9e27f18012261f431dfb01000000000000000c6503058fb07279000000000000004132380d152f736c7573682f\",\"coinbaseAddress\":\"1CK6KHY6MHgYvmRQ4PAafKYDrg1ejbH1cE\",\"coinbaseAddresses\":[\"1CK6KHY6MHgYvmRQ4PAafKYDrg1ejbH1cE\"],\"coinbaseSignature\":\"OP_DUP OP_HASH160 OP_PUSHBYTES_20 7c154ed1dc59609e3d26abb2df2ea3d587cd8c41 OP_EQUALVERIFY OP_CHECKSIG\",\"coinbaseSignatureAscii\":\"\\u0003\u008A#\\u000bú¾mmA²\u0093Z\\u0011Å`\\bý\\\"¢dl\\u000fü2\\u001b\u0091gQbN\u009E'ñ\u0080\\u0012&\\u001fC\\u001dû\\u0001\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\fe\\u0003\\u0005\u008F°ry\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000A28\\r\\u0015/slush/\",\"avgTxSize\":580.6,\"totalInputs\":7304,\"totalOutputs\":7519,\"totalOutputAmt\":366827701813,\"medianFeeAmt\":2461,\"feePercentiles\":[191,1574,1980,2461,3420,6654,5325572],\"segwitTotalTxs\":2336,\"segwitTotalSize\":1464791,\"segwitTotalWeight\":3167111,\"header\":\"04802c22b70649a663fd4f599f989ac5ae75d0860ee0d492110e00000000000000000000375dbd39ded2c141b3506378413c9dbe1ef02116772ae6f5cbe40ff6b0d99bb54a1b476297d80917596120f4\",\"utxoSetChange\":215,\"utxoSetSize\":80397481,\"totalInputAmt\":366849787180,\"virtualSize\":998298.75,\"firstSeen\":null,\"orphans\":[],\"matchRate\":null,\"expectedFees\":null,\"expectedWeight\":null}},{\"id\":\"000000000000000000000e1192d4e00e86d075aec59a989f594ffd63a64906b7\",\"height\":729993,\"version\":536928256,\"timestamp\":1648827009,\"bits\":386521239,\"nonce\":4203892327,\"difficulty\":28587155782195.14,\"merkle_root\":\"4700bb5b8ab8cc43e74075fb166a290822c34c5cbb4c740547fcbeff2b434264\",\"tx_count\":2746,\"size\":1536632,\"weight\":3993419,\"previousblockhash\":\"000000000000000000093c89e57faa0135316163c4485c800ddb3fe8be2b77ad\",\"mediantime\":1648823379,\"extras\":{\"totalFees\":28370344,\"medianFee\":17,\"feeRange\":[15.62937062937063,16,16.142857142857142,17.420494699646643,19.001782531194294,26.232142857142858,443.88085106382977],\"reward\":653370344,\"pool\":{\"id\":105,\"name\":\"Binance Pool\",\"slug\":\"binancepool\",\"minerNames\":null},\"avgFee\":10335,\"avgFeeRate\":28,\"coinbaseRaw\":\"0389230b1362696e616e63652f383234e0008301beb4d4dbfabe6d6de329cbd42ee4e22332a730a63f8be6de9aff3c1e5626fc8652a6da452d0af9d50400000000000000d6700000f8350100\",\"coinbaseAddress\":\"1JvXhnHCi6XqcanvrZJ5s2Qiv4tsmm2UMy\",\"coinbaseAddresses\":[\"1JvXhnHCi6XqcanvrZJ5s2Qiv4tsmm2UMy\"],\"coinbaseSignature\":\"OP_DUP OP_HASH160 OP_PUSHBYTES_20 c499d0604392cc2051d7476056647d1c1bfc3f38 OP_EQUALVERIFY OP_CHECKSIG\",\"coinbaseSignatureAscii\":\"\\u0003\u0089#\\u000b\\u0013binance/824à\\u0000\u0083\\u0001¾´ÔÛú¾mmã)ËÔ.äâ#2§0¦?\u008BæÞ\u009Aÿ<\\u001eV&ü\u0086R¦ÚE-\\nùÕ\\u0004\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000Öp\\u0000\\u0000ø5\\u0001\\u0000\",\"avgTxSize\":559.4300000000001,\"totalInputs\":6536,\"totalOutputs\":10297,\"totalOutputAmt\":685946956612,\"medianFeeAmt\":3072,\"feePercentiles\":[291,2260,2534,3072,4121,8676,3730272],\"segwitTotalTxs\":2014,\"segwitTotalSize\":1306526,\"segwitTotalWeight\":3073103,\"header\":\"00e00020ad772bbee83fdb0d805c48c46361313501aa7fe5893c090000000000000000006442432bffbefc4705744cbb5c4cc32208296a16fb7540e743ccb88a5bbb0047811a476297d80917674e92fa\",\"utxoSetChange\":3761,\"utxoSetSize\":80397295,\"totalInputAmt\":685975326956,\"virtualSize\":998354.75,\"firstSeen\":null,\"orphans\":[],\"matchRate\":null,\"expectedFees\":null,\"expectedWeight\":null}},{\"id\":\"000000000000000000093c89e57faa0135316163c4485c800ddb3fe8be2b77ad\",\"height\":729992,\"version\":536870916,\"timestamp\":1648826388,\"bits\":386521239,\"nonce\":1521750038,\"difficulty\":28587155782195.14,\"merkle_root\":\"d7592466c12aead04ac16db0f3b3a89407380abcdb40358cc5d72e3370ea8dcc\",\"tx_count\":2869,\"size\":1494170,\"weight\":3998264,\"previousblockhash\":\"0000000000000000000842e98d2254bc7b33b5b3f496cfa50c4d04969c619de9\",\"mediantime\":1648823103,\"extras\":{\"totalFees\":20100795,\"medianFee\":17,\"feeRange\":[16.561946902654867,16.917207792207794,17.060498220640568,17.326352530541012,19,23.188911704312115,334.50678733031674],\"reward\":645100795,\"pool\":{\"id\":36,\"name\":\"F2Pool\",\"slug\":\"f2pool\",\"minerNames\":null},\"avgFee\":7008,\"avgFeeRate\":20,\"coinbaseRaw\":\"0388230b2cfabe6d6debf082fd364f6b8d690f6ba80513ebcc173856e3ed853162398b1bdc9b9a9fe110000000f09f909f092f4632506f6f6c2f6500000000000000000000000000000000000000000000000000000000000000000000000500eb81a101\",\"coinbaseAddress\":\"1KFHE7w8BhaENAswwryaoccDb6qcT6DbYY\",\"coinbaseAddresses\":[\"1KFHE7w8BhaENAswwryaoccDb6qcT6DbYY\"],\"coinbaseSignature\":\"OP_DUP OP_HASH160 OP_PUSHBYTES_20 c825a1ecf2a6830c4401620c3a16f1995057c2ab OP_EQUALVERIFY OP_CHECKSIG\",\"coinbaseSignatureAscii\":\"\\u0003\u0088#\\u000b,ú¾mmëð\u0082ý6Ok\u008Di\\u000fk¨\\u0005\\u0013ëÌ\\u00178Vãí\u00851b9\u008B\\u001bÜ\u009B\u009A\u009Fá\\u0010\\u0000\\u0000\\u0000ð\u009F\u0090\u009F\\t/F2Pool/e\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0005\\u0000ë\u0081¡\\u0001\",\"avgTxSize\":520.62,\"totalInputs\":7127,\"totalOutputs\":8453,\"totalOutputAmt\":6819397324621,\"medianFeeAmt\":3230,\"feePercentiles\":[0,2306,2448,3230,4182,7446,1288289],\"segwitTotalTxs\":2277,\"segwitTotalSize\":1221266,\"segwitTotalWeight\":2906756,\"header\":\"04000020e99d619c96044d0ca5cf96f4b3b5337bbc54228de94208000000000000000000cc8dea70332ed7c58c3540dbbc0a380794a8b3f3b06dc14ad0ea2ac1662459d71418476297d809171610b45a\",\"utxoSetChange\":1326,\"utxoSetSize\":80393558,\"totalInputAmt\":6819417425416,\"virtualSize\":999566,\"firstSeen\":null,\"orphans\":[],\"matchRate\":null,\"expectedFees\":null,\"expectedWeight\":null}},{\"id\":\"0000000000000000000842e98d2254bc7b33b5b3f496cfa50c4d04969c619de9\",\"height\":729991,\"version\":536870916,\"timestamp\":1648825994,\"bits\":386521239,\"nonce\":556410822,\"difficulty\":28587155782195.14,\"merkle_root\":\"c4064fb264d5a0ff9959390cba6486c9509f64ae4648cae7d0b94b9d735c5808\",\"tx_count\":2800,\"size\":1354927,\"weight\":3993025,\"previousblockhash\":\"0000000000000000000550783aea28c19a765840ee69f1f8f854a023f55ee319\",\"mediantime\":1648822329,\"extras\":{\"totalFees\":29978347,\"medianFee\":22,\"feeRange\":[18,18.295964125560538,19,22.23716814159292,28.626691042047533,44.642857142857146,392.15686274509807],\"reward\":654978347,\"pool\":{\"id\":43,\"name\":\"Braiins Pool\",\"slug\":\"braiinspool\",\"minerNames\":null},\"avgFee\":10710,\"avgFeeRate\":30,\"coinbaseRaw\":\"0387230bfabe6d6dc08523deb32d690bd0c1029a29a8f644a95f913a78a4096a13ccd9bfa0495dd201000000000000000c65030565c18eb8840000000000003d7d7c0c152f736c7573682f\",\"coinbaseAddress\":\"1CK6KHY6MHgYvmRQ4PAafKYDrg1ejbH1cE\",\"coinbaseAddresses\":[\"1CK6KHY6MHgYvmRQ4PAafKYDrg1ejbH1cE\"],\"coinbaseSignature\":\"OP_DUP OP_HASH160 OP_PUSHBYTES_20 7c154ed1dc59609e3d26abb2df2ea3d587cd8c41 OP_EQUALVERIFY OP_CHECKSIG\",\"coinbaseSignatureAscii\":\"\\u0003\u0087#\\u000bú¾mmÀ\u0085#Þ³-i\\u000bÐÁ\\u0002\u009A)¨öD©_\u0091:x¤\\tj\\u0013ÌÙ¿ I]Ò\\u0001\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\fe\\u0003\\u0005eÁ\u008E¸\u0084\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000=}|\\f\\u0015/slush/\",\"avgTxSize\":483.77,\"totalInputs\":5811,\"totalOutputs\":11128,\"totalOutputAmt\":7413087636319,\"medianFeeAmt\":4175,\"feePercentiles\":[252,2660,3164,4175,8222,19203,989267],\"segwitTotalTxs\":1989,\"segwitTotalSize\":1042269,\"segwitTotalWeight\":2742501,\"header\":\"0400002019e35ef523a054f8f8f169ee4058769ac128ea3a78500500000000000000000008585c739d4bb9d0e7ca4846ae649f50c98664ba0c395999ffa0d564b24f06c48a16476297d80917c6272a21\",\"utxoSetChange\":5317,\"utxoSetSize\":80392277,\"totalInputAmt\":7413117614666,\"virtualSize\":998256.25,\"firstSeen\":null,\"orphans\":[],\"matchRate\":null,\"expectedFees\":null,\"expectedWeight\":null}},{\"id\":\"0000000000000000000550783aea28c19a765840ee69f1f8f854a023f55ee319\",\"height\":729990,\"version\":536895488,\"timestamp\":1648824045,\"bits\":386521239,\"nonce\":3541117811,\"difficulty\":28587155782195.14,\"merkle_root\":\"5f45fe2dc980adfd28ec08ee97a235e65b046310e79e21f6c62dfc4fa01b3444\",\"tx_count\":2711,\"size\":1531842,\"weight\":3993519,\"previousblockhash\":\"00000000000000000001eccd984f2dd8988c85bd4042425fb6bda5d25d93fd62\",\"mediantime\":1648821883,\"extras\":{\"totalFees\":7317820,\"medianFee\":6,\"feeRange\":[3.5927601809954752,4,4.758064516129032,5.97153024911032,7.060232870577698,8.311500150920615,234.15873015873015],\"reward\":632317820,\"pool\":{\"id\":105,\"name\":\"Binance Pool\",\"slug\":\"binancepool\",\"minerNames\":null},\"avgFee\":2700,\"avgFeeRate\":7,\"coinbaseRaw\":\"0386230b1362696e616e63652f373832d8003303ad275122fabe6d6d6801fc8ec5270c7aeb937a23a219d47d12105b0ba9be097c2af52321be44dd85040000000000000079050100e2f20700\",\"coinbaseAddress\":\"1JvXhnHCi6XqcanvrZJ5s2Qiv4tsmm2UMy\",\"coinbaseAddresses\":[\"1JvXhnHCi6XqcanvrZJ5s2Qiv4tsmm2UMy\"],\"coinbaseSignature\":\"OP_DUP OP_HASH160 OP_PUSHBYTES_20 c499d0604392cc2051d7476056647d1c1bfc3f38 OP_EQUALVERIFY OP_CHECKSIG\",\"coinbaseSignatureAscii\":\"\\u0003\u0086#\\u000b\\u0013binance/782Ø\\u00003\\u0003\u00AD'Q\\\"ú¾mmh\\u0001ü\u008EÅ'\\fzë\u0093z#¢\\u0019Ô}\\u0012\\u0010[\\u000b©¾\\t|*õ#!¾DÝ\u0085\\u0004\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000y\\u0005\\u0001\\u0000âò\\u0007\\u0000\",\"avgTxSize\":564.89,\"totalInputs\":7143,\"totalOutputs\":5758,\"totalOutputAmt\":199661543084,\"medianFeeAmt\":1115,\"feePercentiles\":[113,560,763,1115,2008,3553,279500],\"segwitTotalTxs\":2093,\"segwitTotalSize\":1187865,\"segwitTotalWeight\":2617719,\"header\":\"0060002062fd935dd2a5bdb65f424240bd858c98d82d4f98cdec0100000000000000000044341ba04ffc2dc6f6219ee71063045be635a297ee08ec28fdad80c92dfe455fed0e476297d80917732b11d3\",\"utxoSetChange\":-1385,\"utxoSetSize\":80387028,\"totalInputAmt\":199668860904,\"virtualSize\":998379.75,\"firstSeen\":null,\"orphans\":[],\"matchRate\":null,\"expectedFees\":null,\"expectedWeight\":null}},{\"id\":\"00000000000000000001eccd984f2dd8988c85bd4042425fb6bda5d25d93fd62\",\"height\":729989,\"version\":536870916,\"timestamp\":1648823983,\"bits\":386521239,\"nonce\":3411612557,\"difficulty\":28587155782195.14,\"merkle_root\":\"36c5252c10accdf027580ac6a220a71a7f7537307c5f97195364be1556cd9457\",\"tx_count\":2404,\"size\":1483495,\"weight\":3998101,\"previousblockhash\":\"00000000000000000002b6d61b96c24605b13f1dba7d22bf2326a33ebee2f462\",\"mediantime\":1648821536,\"extras\":{\"totalFees\":18550458,\"medianFee\":16,\"feeRange\":[8.316417910447761,9.2145061109998,12.903225806451612,17.02654867256637,18.666666666666668,25.43239951278928,1355.081300813008],\"reward\":643550458,\"pool\":{\"id\":36,\"name\":\"F2Pool\",\"slug\":\"f2pool\",\"minerNames\":null},\"avgFee\":7719,\"avgFeeRate\":18,\"coinbaseRaw\":\"0385230b2cfabe6d6d84b3e853f029b78972970833bc3ee77f988a17cf7fe2ecdd4d7e1300fc76c70b10000000f09f909f092f4632506f6f6c2f6500000000000000000000000000000000000000000000000000000000000000000000000500ee870200\",\"coinbaseAddress\":\"1KFHE7w8BhaENAswwryaoccDb6qcT6DbYY\",\"coinbaseAddresses\":[\"1KFHE7w8BhaENAswwryaoccDb6qcT6DbYY\"],\"coinbaseSignature\":\"OP_DUP OP_HASH160 OP_PUSHBYTES_20 c825a1ecf2a6830c4401620c3a16f1995057c2ab OP_EQUALVERIFY OP_CHECKSIG\",\"coinbaseSignatureAscii\":\"\\u0003\u0085#\\u000b,ú¾mm\u0084³èSð)·\u0089r\u0097\\b3¼>ç\u0098\u008A\\u0017ÏâìÝM~\\u0013\\u0000üvÇ\\u000b\\u0010\\u0000\\u0000\\u0000ð\u009F\u0090\u009F\\t/F2Pool/e\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0005\\u0000î\u0087\\u0002\\u0000\",\"avgTxSize\":616.89,\"totalInputs\":6948,\"totalOutputs\":8802,\"totalOutputAmt\":1030241504883,\"medianFeeAmt\":2890,\"feePercentiles\":[234,1674,2210,2890,4240,9733,1552668],\"segwitTotalTxs\":1811,\"segwitTotalSize\":1169147,\"segwitTotalWeight\":2740817,\"header\":\"0400002062f4e2be3ea32623bf227dba1d3fb10546c2961bd6b6020000000000000000005794cd5615be645319975f7c3037757f1aa720a2c60a5827f0cdac102c25c536af0e476297d809178d1359cb\",\"utxoSetChange\":1854,\"utxoSetSize\":80388459,\"totalInputAmt\":1030260055341,\"virtualSize\":999525.25,\"firstSeen\":null,\"orphans\":[],\"matchRate\":null,\"expectedFees\":null,\"expectedWeight\":null}},{\"id\":\"00000000000000000002b6d61b96c24605b13f1dba7d22bf2326a33ebee2f462\",\"height\":729988,\"version\":538968064,\"timestamp\":1648823379,\"bits\":386521239,\"nonce\":2855741483,\"difficulty\":28587155782195.14,\"merkle_root\":\"384950d89347a50f5a0dc456da681d873183ee7b2dad6f00baab9b0b475c9853\",\"tx_count\":1412,\"size\":1289127,\"weight\":3992940,\"previousblockhash\":\"000000000000000000028627a1cbb7e7523a54a7f1fdfd1512293fa52d204e70\",\"mediantime\":1648819902,\"extras\":{\"totalFees\":14542588,\"medianFee\":11,\"feeRange\":[9.189122373300371,9.99697428139183,10.75788795878944,14.737967914438503,18.096774193548388,25.013452914798208,474.41711229946526],\"reward\":639542588,\"pool\":{\"id\":111,\"name\":\"Foundry USA\",\"slug\":\"foundryusa\",\"minerNames\":null},\"avgFee\":10306,\"avgFeeRate\":14,\"coinbaseRaw\":\"0384230b04540c47622f466f756e6472792055534120506f6f6c202364726f70676f6c642f0ab9772b0000060b674b0100\",\"coinbaseAddress\":\"19dENFt4wVwos6xtgwStA6n8bbA57WCS58\",\"coinbaseAddresses\":[\"19dENFt4wVwos6xtgwStA6n8bbA57WCS58\"],\"coinbaseSignature\":\"OP_DUP OP_HASH160 OP_PUSHBYTES_20 5e9b23809261178723055968d134a947f47e799f OP_EQUALVERIFY OP_CHECKSIG\",\"coinbaseSignatureAscii\":\"\\u0003\u0084#\\u000b\\u0004T\\fGb/Foundry USA Pool #dropgold/\\n¹w+\\u0000\\u0000\\u0006\\u000bgK\\u0001\\u0000\",\"avgTxSize\":912.77,\"totalInputs\":6511,\"totalOutputs\":7248,\"totalOutputAmt\":412220448721,\"medianFeeAmt\":2620,\"feePercentiles\":[141,1500,1932,2620,4500,10348,828787],\"segwitTotalTxs\":1133,\"segwitTotalSize\":973473,\"segwitTotalWeight\":2730432,\"header\":\"00002020704e202da53f291215fdfdf1a7543a52e7b7cba127860200000000000000000053985c470b9babba006fad2d7bee8331871d68da56c40d5a0fa54793d8504938530c476297d809172b2837aa\",\"utxoSetChange\":737,\"utxoSetSize\":80386654,\"totalInputAmt\":412234991309,\"virtualSize\":998235,\"firstSeen\":null,\"orphans\":[],\"matchRate\":null,\"expectedFees\":null,\"expectedWeight\":null}},{\"id\":\"000000000000000000028627a1cbb7e7523a54a7f1fdfd1512293fa52d204e70\",\"height\":729987,\"version\":854794240,\"timestamp\":1648823103,\"bits\":386521239,\"nonce\":1426454308,\"difficulty\":28587155782195.14,\"merkle_root\":\"e1b4f6ae8e543ff84043370ea8dc81fe08d8c5b3d198ff1eeef848a70f02dc91\",\"tx_count\":2549,\"size\":1512115,\"weight\":3992830,\"previousblockhash\":\"0000000000000000000877cf7c645ef46e4b15dc6aa57807e73294e133f4204a\",\"mediantime\":1648819256,\"extras\":{\"totalFees\":25194700,\"medianFee\":17,\"feeRange\":[10.787330316742082,12.01923076923077,15.273596176821984,17.451327433628318,23.29242023978866,37.16591928251121,1041.124414367517],\"reward\":650194700,\"pool\":{\"id\":111,\"name\":\"Foundry USA\",\"slug\":\"foundryusa\",\"minerNames\":null},\"avgFee\":9888,\"avgFeeRate\":25,\"coinbaseRaw\":\"0383230b043f0b47622f466f756e6472792055534120506f6f6c202364726f70676f6c642f0db60833cf01000000000000\",\"coinbaseAddress\":\"19dENFt4wVwos6xtgwStA6n8bbA57WCS58\",\"coinbaseAddresses\":[\"19dENFt4wVwos6xtgwStA6n8bbA57WCS58\"],\"coinbaseSignature\":\"OP_DUP OP_HASH160 OP_PUSHBYTES_20 5e9b23809261178723055968d134a947f47e799f OP_EQUALVERIFY OP_CHECKSIG\",\"coinbaseSignatureAscii\":\"\\u0003\u0083#\\u000b\\u0004?\\u000bGb/Foundry USA Pool #dropgold/\\r¶\\b3Ï\\u0001\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\",\"avgTxSize\":593.1,\"totalInputs\":6269,\"totalOutputs\":8566,\"totalOutputAmt\":4410294576959,\"medianFeeAmt\":3348,\"feePercentiles\":[336,1976,2414,3348,6090,20000,2832086],\"segwitTotalTxs\":2093,\"segwitTotalSize\":1302021,\"segwitTotalWeight\":3152562,\"header\":\"0020f3324a20f433e19432e70778a56adc154b6ef45e647ccf770800000000000000000091dc020fa748f8ee1eff98d1b3c5d808fe81dca80e374340f83f548eaef6b4e13f0b476297d8091724f70555\",\"utxoSetChange\":2297,\"utxoSetSize\":80385944,\"totalInputAmt\":4410319771659,\"virtualSize\":998207.5,\"firstSeen\":null,\"orphans\":[],\"matchRate\":null,\"expectedFees\":null,\"expectedWeight\":null}},{\"id\":\"0000000000000000000877cf7c645ef46e4b15dc6aa57807e73294e133f4204a\",\"height\":729986,\"version\":536887300,\"timestamp\":1648822329,\"bits\":386521239,\"nonce\":2774518508,\"difficulty\":28587155782195.14,\"merkle_root\":\"d5ed0d55ea9212e0f7f85e7c6f08c5471d076eb238595b23ef98445f7203ae94\",\"tx_count\":1467,\"size\":1208564,\"weight\":3993332,\"previousblockhash\":\"00000000000000000004a7138eabd5726c58714bef1b221ecb4257ca91d53a53\",\"mediantime\":1648818923,\"extras\":{\"totalFees\":14955019,\"medianFee\":11,\"feeRange\":[10.791718170580964,12.163817663817664,15.918367346938776,18.048692515779983,20.96551724137931,29.526017794553788,215.05376344086022],\"reward\":639955019,\"pool\":{\"id\":43,\"name\":\"Braiins Pool\",\"slug\":\"braiinspool\",\"minerNames\":null},\"avgFee\":10201,\"avgFeeRate\":14,\"coinbaseRaw\":\"0382230bfabe6d6db29764abe6dc811ff15f3492ccef9815df6dfd7cc0497197952ba451aba615230100000000000000096504059f32b4e0a83e0000000000b37b4f0a152f736c7573682f\",\"coinbaseAddress\":\"1CK6KHY6MHgYvmRQ4PAafKYDrg1ejbH1cE\",\"coinbaseAddresses\":[\"1CK6KHY6MHgYvmRQ4PAafKYDrg1ejbH1cE\"],\"coinbaseSignature\":\"OP_DUP OP_HASH160 OP_PUSHBYTES_20 7c154ed1dc59609e3d26abb2df2ea3d587cd8c41 OP_EQUALVERIFY OP_CHECKSIG\",\"coinbaseSignatureAscii\":\"\\u0003\u0082#\\u000bú¾mm²\u0097d«æÜ\u0081\\u001fñ_4\u0092Ìï\u0098\\u0015ßmý|ÀIq\u0097\u0095+¤Q«¦\\u0015#\\u0001\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\te\\u0004\\u0005\u009F2´à¨>\\u0000\\u0000\\u0000\\u0000\\u0000³{O\\n\\u0015/slush/\",\"avgTxSize\":823.58,\"totalInputs\":6599,\"totalOutputs\":4738,\"totalOutputAmt\":421785453420,\"medianFeeAmt\":3196,\"feePercentiles\":[710,1980,2481,3196,5202,11188,1041342],\"segwitTotalTxs\":1244,\"segwitTotalSize\":1047475,\"segwitTotalWeight\":3349084,\"header\":\"04400020533ad591ca5742cb1e221bef4b71586c72d5ab8e13a70400000000000000000094ae03725f4498ef235b5938b26e071d47c5086f7c5ef8f7e01292ea550dedd53908476297d80917ecca5fa5\",\"utxoSetChange\":-1861,\"utxoSetSize\":80383679,\"totalInputAmt\":421800408439,\"virtualSize\":998333,\"firstSeen\":null,\"orphans\":[],\"matchRate\":null,\"expectedFees\":null,\"expectedWeight\":null}}]"
    }
}